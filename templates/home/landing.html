{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LembraPro | Pós-atendimento que encanta pacientes</title>
    <link rel="icon" href="{% static 'img/logo.png' %}" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{% static 'css/landing.css' %}">
</head>
<body>
    <div class="landing-wrapper">
        <header class="hero" id="top">
            <nav class="navbar">
                <div class="brand">
                    <img src="{% static 'img/logo.png' %}" alt="LembraPro logo">
                    <div>
                        <strong>LembraPro</strong>
                        <span>Pós-consulta inteligente</span>
                    </div>
                </div>
                <div class="nav-links">
                    <a href="#features">Funcionalidades</a>
                    <a href="#como-funciona">Como funciona</a>
                    <a href="#resultados">Resultados</a>
                    <a href="#contato" class="btn btn-ghost">Quero conhecer</a>
                    <a href="{% url 'login' %}" class="btn btn-primary">Entrar</a>
                </div>
            </nav>

            <div class="hero-content container">
                <div class="hero-text fade-up">
                    <p class="badge">Controle pós-consulta para nutricionistas</p>
                    <h1>Transforme cada acompanhamento em uma experiência memorável.</h1>
                    <p class="subtitle">
                        Automatize lembretes e mantenha pacientes engajados entre consultas.
                        Mostre profissionalismo e aumente a recompra com um fluxo inteligente.
                    </p>
                    <div class="hero-ctas">
                        <a href="#contato" class="btn btn-primary btn-lg">
                            <i class="bi bi-stars me-2"></i>Quero uma demonstração
                        </a>
                        <a href="{% url 'login' %}" class="btn btn-outline-light btn-lg">
                            <i class="bi bi-play-circle me-2"></i>Ver ambiente de testes
                        </a>
                    </div>
                    <!-- <div class="hero-highlights">
                        <div>
                            <strong>+42%</strong>
                            <span>pacientes ativos após 3 meses</span>
                        </div>
                        <div>
                            <strong>8h/sem</strong>
                            <span>economia média com automações</span>
                        </div>
                        <div>
                            <strong>100%</strong>
                            <span>histórico centralizado</span>
                        </div>
                    </div> -->
                </div>
                <div class="hero-card fade-up delay-1">
                    <div class="hero-card-header">
                        <span class="status-pill">Painel ao vivo</span>
                        <span class="text-muted">Atualizado agora</span>
                    </div>
                    <div class="mini-board">
                        <div>
                            <p class="label">Total de pacientes cadastrados</p>
                            <h3>18</h3>
                            <!-- <small class="text-success"><i class="bi bi-arrow-up"></i> +5 vs. semana passada</small> -->
                        </div>
                        <div>
                            <p class="label">Lembretes em atraso</p>
                            <h3>4</h3>
                            <!-- <small class="text-muted">+ 12 pacientes celebrando metas</small> -->
                        </div>
                    </div>
                    <div class="timeline-preview">
                        <div class="step">
                            <span class="dot"></span>
                            <div>
                                <strong>Enviar plano alimentar</strong>
                                <!-- <p>Notificação WhatsApp</p> -->
                            </div>
                        </div>
                        <div class="step">
                            <span class="dot"></span>
                            <div>
                                <strong>Checagem de progresso e disponibilidade para daptação</strong>
                                <!-- <p>Agendado para 22/08</p> -->
                            </div>
                        </div>
                        <div class="step">
                            <span class="dot"></span>
                            <div>
                                <strong>Lembrar de retorno</strong>
                                <!-- <p></p> -->
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <span>Quer um painel assim?</span>
                        <a href="#contato">Vamos conversar <i class="bi bi-arrow-right-short"></i></a>
                    </div>
                </div>
            </div>
        </header>

        <main>
            <section id="features" class="section container">
                <div class="section-heading">
                    <p class="badge">Funcionalidades-chave</p>
                    <h2>O LembraPro trabalha enquanto você cuida dos seus pacientes.</h2>
                    <p>Automatizamos o que é repetitivo, mantendo espaço para o cuidado humano.</p>
                </div>
                <div class="feature-grid">
                    <article class="feature-card fade-up">
                        <div class="icon-circle">
                            <i class="bi bi-calendar-check"></i>
                        </div>
                        <h3>Jornadas inteligentes</h3>
                        <p>Crie fluxos com lembretes, materiais e follow-ups que se adaptam ao perfil de cada paciente.</p>
                        <ul>
                            <li>Lembretes por whatsapp</li>
                            <li>Segmentação por objetivos</li>
                            <li>Monitoramento em tempo real</li>
                        </ul>
                    </article>
                    <article class="feature-card fade-up delay-1">
                        <div class="icon-circle">
                            <i class="bi bi-chat-heart"></i>
                        </div>
                        <h3>Lembretes WhatsApp</h3>
                        <p>Você receberá no seu whatsapp um lembrete para entrar em contato com aquele paciente.</p>
                        <ul>
                            <li>Templates aprovados</li>
                            <li>Alertas inteligentes</li>
                        </ul>
                    </article>
                    <article class="feature-card fade-up delay-2">
                        <div class="icon-circle">
                            <i class="bi bi-graph-up-arrow"></i>
                        </div>
                        <h3>Configurações flexíveis</h3>
                        <p>Ative e desative alertas para pacientes específicos.</p>
                        <ul>
                            <li>Controle de alertas</li>
                            <li>Saiba quem precisa ser contatado</li>
                        </ul>
                    </article>
                </div>
            </section>

            <section id="como-funciona" class="section workflow">
                <div class="container">
                    <div class="section-heading">
                        <p class="badge">Como funciona</p>
                        <h2>Em três passos você tem um pós-consulta de qualidade.</h2>
                    </div>
                    <div class="workflow-steps">
                        <div class="step-card fade-up">
                            <span class="step-number">1</span>
                            <h3>Personalize sua jornada</h3>
                            <p>Importe seus pacientes, defina grupos de lembretes e envie materiais com poucos cliques.</p>
                        </div>
                        <div class="step-card fade-up delay-1">
                            <span class="step-number">2</span>
                            <h3>Automatize contatos</h3>
                            <p>O LembraPro dispara WhatsApp para lembrar que existe um contato a fazer.</p>
                        </div>
                        <div class="step-card fade-up delay-2">
                            <span class="step-number">3</span>
                            <h3>Acompanhe</h3>
                            <p>Nunca mais esqueça de entrar em contato com aquele paciente.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="section highlight container">
                <div class="highlight-card fade-up">
                    <div>
                        <p class="badge">Recursos exclusivos</p>
                        <h2>Organização clínica e comercial no mesmo lugar.</h2>
                        <p>Dos lembretes pós-consulta ao agendamento do retorno, tudo fica documentado e mensurado.</p>
                        <ul>
                            <li><i class="bi bi-check-circle-fill"></i> Biblioteca de materiais</li>
                            <li><i class="bi bi-check-circle-fill"></i> Alertas de pacientes que precisam ter contato</li>
                            <li><i class="bi bi-check-circle-fill"></i> Dashboards com indicadores (Em andamento)</li>
                        </ul>
                    </div>
                    <!-- <div class="highlight-kpis">
                        <div>
                            <strong>3x</strong>
                            <span>mais reconsultas agendadas</span>
                        </div>
                        <div>
                            <strong>92%</strong>
                            <span>abertura média dos lembretes</span>
                        </div>
                        <div>
                            <strong>5 min</strong>
                            <span>para montar um fluxo completo</span>
                        </div>
                    </div> -->
                </div>
            </section>

            <section class="section container">
                <div class="section-heading">
                    <p class="badge">Template aprovado</p>
                    <h2>Veja o lembrete que voce recebe no WhatsApp.</h2>
                    <p>Mensagem interativa com botao de confirmacao para agilizar seu fluxo.</p>
                </div>
                <div class="card shadow-sm fade-up">
                    <div class="card-body">
                        <div class="d-flex align-items-start gap-3">
                            <div class="rounded-circle bg-success text-white d-flex align-items-center justify-content-center" style="width: 44px; height: 44px;">
                                <i class="bi bi-whatsapp"></i>
                            </div>
                            <div class="flex-grow-1">
                                <p class="text-muted mb-1 small">Corpo do template interativo</p>
                                <div class="bg-light p-3 rounded border">
                                    <p class="mb-2">
                                        Ola, <strong>Dr. Ana Silva</strong>! &#x1F44B;<br>
                                        Passando aqui so para te lembrar de entrar em contato com o(a) paciente <strong>Joao Santos</strong>.
                                    </p>
                                    <p class="mb-2">
                                        &#x1F4DE; Telefone: <strong>11 99999-9999</strong><br>
                                        &#x1F489; Acao necessaria: <strong>Enviar ajuste do plano alimentar</strong>
                                    </p>
                                    <p class="mb-2">
                                        &#x1F4C4; Materiais para enviar:<br>
                                        <em>- PDF do novo plano<br>- Guia de compras da semana</em>
                                    </p>
                                    <p class="mb-3">
                                        Se puder mandar mensagem para ele(a) ainda hoje, otimo! Assim mantemos o acompanhamento bem alinhado e continuo. &#x1F49A;&#x2728;
                                    </p>
                                    <div class="d-grid">
                                        <button class="btn btn-success">
                                            Ok, vou enviar <span class="text-white-50 small ms-2">(id: BTN_CONFIRMA_ENVIO)</span>
                                        </button>
                                    </div>
                                    <p class="small text-muted mt-2 mb-0">
                                        Tipo: interactive/button &middot; Acao: reply &middot; Botao responde ao lembrete automaticamente.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- <section id="resultados" class="section results">
                <div class="container">
                    <div class="section-heading text-center">
                        <p class="badge">Resultados</p>
                        <h2>Nutricionistas que já vendem mais acompanhamentos.</h2>
                    </div>
                    <div class="results-grid">
                        <article class="result-card fade-up">
                            <h3>Atendimento boutique</h3>
                            <p>“Os lembretes automáticos fazem o paciente sentir que estou sempre presente.”</p>
                            <div class="author">
                                <strong>Camila Borges</strong>
                                <span>Nutricionista clínica · SP</span>
                            </div>
                        </article>
                        <article class="result-card fade-up delay-1">
                            <h3>Gestão em escala</h3>
                            <p>“Passei de 40 para 120 pacientes com a mesma equipe e sem perder qualidade.”</p>
                            <div class="author">
                                <strong>Equipe Vitta Care</strong>
                                <span>Clínica especializada</span>
                            </div>
                        </article>
                        <article class="result-card fade-up delay-2">
                            <h3>Foco na ciência</h3>
                            <p>“O sistema cuida do operacional e eu fico livre para o planejamento nutricional.”</p>
                            <div class="author">
                                <strong>Lucas Andrade</strong>
                                <span>Nutricionista esportivo</span>
                            </div>
                        </article>
                    </div>
                </div>
            </section> -->

            <section id="contato" class="section contact container">
                <div class="contact-card fade-up">
                    <div>
                        <p class="badge">Vamos conversar</p>
                        <h2>Receba uma apresentação guiada.</h2>
                        <p>Preencha seus dados e nosso time entra em contato com uma proposta sob medida.</p>
                        <div class="contact-info">
                            <div>
                                <i class="bi bi-patch-check"></i>
                                Implementação assistida em 7 dias
                            </div>
                            <div>
                                <i class="bi bi-shield-lock"></i>
                                LGPD & backups automáticos
                            </div>
                            <div>
                                <i class="bi bi-headset"></i>
                                Suporte humano em horário comercial
                            </div>
                        </div>
                    </div>
                    <div>
                        <form id="lead-form" class="lead-form">
                            {% csrf_token %}
                            <div class="form-floating">
                                <input type="text" class="form-control" id="lead-name" placeholder="Nome completo" required>
                                <label for="lead-name">Nome completo</label>
                            </div>
                            <div class="form-floating">
                                <input type="email" class="form-control" id="lead-email" placeholder="email@empresa.com" required>
                                <label for="lead-email">E-mail profissional</label>
                            </div>
                            <div class="form-floating">
                                <input type="tel" class="form-control" id="lead-whatsapp" placeholder="11999999999" required>
                                <label for="lead-whatsapp">WhatsApp com DDD</label>
                            </div>
                            <button type="submit" id="lead-submit" class="btn btn-primary w-100">
                                <i class="bi bi-rocket-takeoff me-2"></i>Quero ser cliente
                            </button>
                            <p class="small text-muted mt-2">
                                Enviamos apenas comunicações relevantes. Nada de spam.
                            </p>
                            <div id="lead-feedback" class="mt-2 small"></div>
                        </form>
                    </div>
                </div>
            </section>
        </main>

        <footer class="footer">
            <div class="container">
                <p>© {% now 'Y' %} LembraPro. Pós-atendimento inteligente para nutricionistas.</p>
                <div>
                    <a href="#top">Voltar ao topo</a>
                    <span>&middot;</span>
                    <a href="{% url 'politica_privacidade' %}" target="_blank">Política de privacidade</a>
                    <span>&middot;</span>
                    <a href="{% url 'termos_servico' %}" target="_blank">Termos de Serviço</a>
                </div>
            </div>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const observer = new IntersectionObserver(
                (entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('is-visible');
                            observer.unobserve(entry.target);
                        }
                    });
                },
                { threshold: 0.15 }
            );

            document.querySelectorAll('.fade-up').forEach(el => observer.observe(el));

            const form = document.getElementById('lead-form');
            const feedback = document.getElementById('lead-feedback');
            const submitBtn = document.getElementById('lead-submit');
            const csrfInput = form?.querySelector('input[name="csrfmiddlewaretoken"]');

            form?.addEventListener('submit', (event) => {
                event.preventDefault();
                if (!csrfInput) {
                    return;
                }

                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }

                feedback.textContent = '';
                feedback.classList.remove('text-success', 'text-danger');
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>Enviando...';

                const payload = {
                    nome: document.getElementById('lead-name').value.trim(),
                    email: document.getElementById('lead-email').value.trim(),
                    whatsapp: document.getElementById('lead-whatsapp').value.trim(),
                };

                fetch('{% url "solicitar_acesso" %}', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': csrfInput.value,
                    },
                    body: JSON.stringify(payload),
                })
                    .then(async (response) => {
                        const data = await response.json();
                        if (!response.ok) {
                            throw new Error(data?.erro || 'Não foi possível enviar agora.');
                        }
                        feedback.classList.add('text-success');
                        feedback.textContent = data?.mensagem || 'Recebemos seus dados! Em breve retornamos.';
                        form.reset();
                    })
                    .catch((error) => {
                        feedback.classList.add('text-danger');
                        feedback.textContent = error.message;
                    })
                    .finally(() => {
                        submitBtn.disabled = false;
                        submitBtn.innerHTML = '<i class="bi bi-rocket-takeoff me-2"></i>Quero ser cliente';
                    });
            });
        });
    </script>
</body>
</html>
